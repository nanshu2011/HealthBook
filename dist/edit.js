function init(){currentuser=Parse.User.current(),username=currentuser.get("username");var a,b=Parse.Object.extend("Habit");currentuser.fetch({success:function(c){a=c.get("lastehabit");var d=new Parse.Query(b);d.equalTo("habitName",a),d.equalTo("username",username),d.find({success:function(a){var b=a[0];b.fetch({success:function(a){selectImage(a.get("image")),document.getElementById("title").value=a.get("habitName"),document.getElementById("others").value=a.get("dailyFreq");for(var b=a.get("weekFreq"),c=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],d=0;d<c.length;d++)document.getElementById(c[d]).checked=!1;for(var d=0;d<b.length;d++)document.getElementById(b[d]).checked=!0;habit=a}})},error:function(a){alert("Error: "+a.code+" "+a.message)}})}})}function selectImage(a){document.getElementById("icon1").style.border="none",document.getElementById("icon2").style.border="none",document.getElementById("icon3").style.border="none";var b=document.getElementById(a);b.style.border="5px solid #42A5F5",imageName=a}function saveHabit(){var a=Parse.Object.extend("Habit"),b=[],c=document.getElementById("title").value;if(!c)return void(document.getElementById("habittitleError").innerHTML="* Habit Title cannot be empty!");c=document.getElementById("title").value;var d=new Parse.Query(a);if(d.equalTo("habitName",c),document.getElementById("habittitleError").value="false","true"!=document.getElementById("habittitleError").value){if(document.getElementById("habittitleError").innerHTML="",!imageName)return void(document.getElementById("habiticonError").innerHTML="* Habit Icon cannot be empty!");if(document.getElementById("habiticonError").innerHTML="",$("input:checkbox[name=date]:checked").each(function(){b.push($(this).val())}),0==b.length)return void(document.getElementById("weekfreError").innerHTML="* Weekly Frequency cannot be empty!");document.getElementById("weekfreError").innerHTML="";var e,f=$('input[name="day"]:checked').val();switch("undefined"==typeof f&&(f=document.getElementById("others").value),f){case"one":e=1;break;case"two":e=2;break;case"three":e=3;break;default:if(e=parseInt(f),Number.isNaN(e))return void(document.getElementById("otherError").innerHTML="* Daily Frequency is empty or not a valid integer!");document.getElementById("otherError").innerHTML=""}habit.set("image",imageName),habit.set("habitName",c),habit.set("weekFreq",b),habit.set("dailyFreq",e),habit.save(null,{image:imageName,habitName:c,weekFreq:b,dailyFreq:e},{success:function(a){console.log("successfully saved habit"),document.getElementById("save").value="Saved!",window.location.assign("list.html")},error:function(a,b){console.log("failed to save habit"),document.getElementById("save").value="Error while saving."}}),window.location.assign("list.html")}}Parse.initialize("rriccses0xkmfyCu8JHUbRB3n4mJW1H3okqs1Sjh","z8QtkGlujwURiXFdYzi4SV7L9X6BxWdQG6bVecA2");var currentuser,username,habit;window.onload=init();var imageName;