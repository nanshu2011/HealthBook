function dailyNotification(a){if(currentuser.get("loginTime")>currentuser.get("lastLoginTime")&&checkNoticiationSettings()){if("Notification"in window)if("granted"===Notification.permission){new Notification("Update your "+a+" habits!")}else"denied"!==Notification.permission&&Notification.requestPermission(function(b){if("granted"===b){new Notification("Update your "+a+" habits!")}});else alert("Update your "+a+" habits!");var b=currentuser.get("loginTime");currentuser.set("lastLoginTime",b),currentuser.save(null,{lastLoginTime:b},{success:function(a){console.log("save login time successful"),document.getElementById("save").value="Saved!"},error:function(a,b){console.log("error when saving login time"),document.getElementById("save").value="Error while saving."}})}}function logoutButton(){Parse.User.logOut(),window.location.href="login.html"}function goTo(a){window.location.href=a}function checkNoticiationSettings(){var a=currentuser.get("notificationSetting");return a}function changeNotificationSettings(a){console.log("changeNotificationSettings()"),currentuser.set("notificationSetting",a),currentuser.save(null,{notificationSetting:a},{success:function(a){console.log("save notification successful"),document.getElementById("save").value="Saved!"},error:function(a,b){console.log("error when saving notification"),document.getElementById("save").value="Error while saving."}})}function notificationSettingClicked(){console.log("Current user: "+currentuser.get("username"));var a=checkNoticiationSettings();if(console.log("Before: "+a),"on"===a){var b=confirm("Do you want to turn OFF notifications?");1==b&&changeNotificationSettings("trashcan")}else if("trashcan"===a||"off"===a){var b=confirm("Do you want to turn ON notifications?");1==b&&changeNotificationSettings("on")}console.log("After: "+checkNoticiationSettings())}Parse.initialize("rriccses0xkmfyCu8JHUbRB3n4mJW1H3okqs1Sjh","z8QtkGlujwURiXFdYzi4SV7L9X6BxWdQG6bVecA2");var currentuser=Parse.User.current();currentuser.fetch();var username=currentuser.get("username"),habitCount=0,Habit=Parse.Object.extend("Habit"),query=new Parse.Query(Habit);query.equalTo("username",username),query.count({success:function(a){habitCount=a,console.log("Habit Count: "+habitCount),dailyNotification(habitCount)},error:function(a){console.log("Ooops")}}),$(function(){$("#username").append("<li>"+username+"<ul id='logout' onclick='logoutButton()'>     <li>Logout</li>     </ul></li>"),element1=document.getElementById("settings"),element1&&element1.addEventListener("click",notificationSettingClicked,!1)});